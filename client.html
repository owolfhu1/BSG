<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>test test</title>

    <!-- socket io -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- socket io -->

    <!-- jquery -->
    <script src="jquery-1.11.1.js"></script>
    <script src="jquery-ui.min.js"></script>
    <link rel="stylesheet" href="jquery-ui.min.css">
    <!-- jquery -->

    <!-- bootstrap -->
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap.min.dark.css">
    <script src="bootstrap.min.js"></script>
    <!-- bootstrap -->

    <style>
    	html, body {
    		height: 100%; width: 100%;
    	}
    	#main_panel{
            height:100%;
        }
    	#left_panel{
    		width:25%;
            height:100%;
            float:left;
        }
        #right_panel{
    		width:75%;
            height:100%;
            float:left;
        }
        #game_body{
            height:70%;
            width:950px;
            overflow: scroll;
            border-left : solid black 2px;
            border-bottom : solid black 2px;
        }
        #game_data{
        	height:40%;
            padding:5px;
            overflow-y:scroll;
        }
        #chat{
        	height:40%;
            padding:5px;
            overflow-y:scroll;
        }
        #main_board{
            height:1525px;
            width:1750px;
            background-image: url("BSG_board.jpg");
            background-size: 1750px 1525px;
            position:relative;
        }
        #hand_container{
            height:30%;
            width:950px;
            overflow: scroll;
            border-left : solid black 2px;
        }
        #player_hand{
            height:100%;
            position:relative;
        }
        #turnAlert{
            position:fixed;
            width:120px;
            height:35px;
            top:0px;
            left:325px;
            color:black;
            font-size:20px;
            background-color: white;
            border : solid black 2px;
            z-index:99;
        }
        #skillCheckPanel{
            position:fixed;
            top:205px;
            left:750px;
            border : solid white 2px;
            background-color:black;
            z-index:99;
        }
        #choicePanel{
            position:fixed;
            top:50px;
            left:500px;
            border : solid white 2px;
            background-color:black;
            z-index:99;
        }
        #reactChoicePanel{
            position:fixed;
            top:50px;
            left:750px;
            border : solid white 2px;
            background-color:black;
            z-index:100;
        }
        #diePanel{
            width:93px;
            height:100px;
            background-size:93px 100px;
            padding:10px;
            position:fixed;
            top:50px;
            left:375px;
            border : solid white 2px;
            background-color:black;
            z-index:99;
        }
        #colonialOneDestroyed{
        	position:absolute;
        	height:200px;
        	width:674px;
        	left:200px;
        	top:205px;
        	background-size:674px 200px;
        	background-image:url("Daybreak_Colonial_One_Destroyed.png");
        	z-index:1;
        }
        .playerPiece{
            border : solid white 2px;
        }
        .skillCard{
            /*border : solid black 2px;*/
        }
        .quorumCard{
            /*border : solid black 2px;*/
        }
        .characterCard{
            /*border : solid black 2px;*/
        }
        .cardSelected{
            border : solid lightgreen 2px;
        }
        .cardHover{
            border : solid white 2px;
        }
        .humanFleetCardHover{
        	z-index : 101;
            border : solid white 2px;
        }


        .text-display{
            height: 250px;
            overflow-y: scroll;
        }

        .border{
            border : solid black 1px;
            border-radius: 10px;
        }

        .locationHighlight{
            border : solid white 2px;
        }

    </style>

</head>
<body>
<div id="main_panel">
	<div id="left_panel">
		<div id="game_data">
		</div>
		<input id="game_input" type="text" class="form-control" placeholder="enter game commands here"/>
		<br/>
		<div id="chat">
		</div>
		<input id="chat_input" type="text" class="form-control" placeholder="chat here"/>
	</div>
    <div id="right_panel">
        <div id="game_body">
            <input id="username" type="text" placeholder="username" class="form-control"/>
            <button id="login" class="btn btn-success btn-lg btn-block">log in</button>
        </div>
        <div id='hand_container'><div id='player_hand'></div></div>
    </div>
</div>

<script>
    //Prevent you from going back by mistake
    window.onbeforeunload = function() { return ""; };

    let socket = io();
    let name = 'error';
    let chat = document.getElementById('chat');
    let chat_input = document.getElementById('chat_input');
    let game_body = document.getElementById('game_body');
    let online = document.getElementById('online');
    let username = document.getElementById('username');
    let login = document.getElementById('login');
    let game_input = document.getElementById('game_input');
    let game_data = document.getElementById('game_data');
    //let something = document.getElementById('something');

    let activateLocation = function(){
        socket.emit('game_text', 'activate');
    };

    let clickLocation = function(loc){
        socket.emit('game_text', locationToEnum[loc]);
    };

    let clickSkillCard = function(num){
        socket.emit('game_text', ("hand "+num));
    };

    let clickQuorumCard = function(num){
        socket.emit('game_text', ("quorum "+num));
    };

    let clickCharacterCard = function(character){
        socket.emit('game_text', character);
    };

    let clickCenturion = function(num){
        socket.emit('game_text', "centurion "+num);
    };

    let clickNuke = function(character){
        socket.emit('game_text', "nuke");
    };

    let clickLoyalty = function(num){
        socket.emit('game_text', "loyalty "+num);
    };

    let clickShip = function(area,num){
        socket.emit('game_text', area+" "+num);
    };

    let clickSpaceArea = function(area){
        socket.emit('game_text', area);
    };

    let submitCrisis = function(){
        let selected="";
        $(".skillCard").each(
            function (index) {
                if($(this).hasClass("cardSelected")){
                    selected+=" "+index;
                }
            },
        );
        if(selected===""){
            selected="pass";
        }else{
            selected=selected.substr(1);
        }
        socket.emit('game_text', selected);
    };

    let submitChoice = function(choice){
        socket.emit('game_text', choice);
    };

    let spaceAreaToCoords ={
        "Northeast":[890,445,330,215],
        "East":[1400,600,150,565],
        "Southeast":[888,1120,380,200],
        "Southwest":[480,1120,380,200],
        "West":[195,615,185,515],
        "Northwest":[530,445,330,215],
    };

    let spaceAreaToEnum ={
        "Northeast":"NE",
        "East":"E",
        "Southeast":"SE",
        "Southwest":"SW",
        "West":"W",
        "Northwest":"NW",
    };

    let shipTypeToGraphic = {
        "Viper":"Viper.png",
        "Basestar":"BSG_basestar_01.gif",
        "Raider":"BSG_Raider.gif",
        "Heavy Raider":"BSG_HeavyRaider.gif",
        "Civilian":"BSG_ship_bk.gif",
    };

    let shipTypeToSize = {
        "Viper":[61,31],
        "Basestar":[179,93],
        "Raider":[56,39],
        "Heavy Raider":[90,27],
        "Civilian":[82,42],
    };

    let civilianResourceToGraphic = {
        "One Population":"BSG_ship_04.gif",
        "Two Population":"BSG_ship_03.gif",
        "Population Fuel":"BSG_ship_01.gif",
        "Population Morale":"BSG_ship_07.gif",
        "Nothing":"BSG_ship_02.gif",
    };

    let locationToEnum = {
        //Colonial One
        "Press Room":"PRESS_ROOM",
        "Presidents Office":"PRESIDENTS_OFFICE",
        "Administration":"ADMINISTRATION",

        //Cylon Locations
        "Caprica":"CAPRICA",
        "Cylon Fleet":"CYLON_FLEET",
        "Human Fleet":"HUMAN_FLEET",
        "Resurrection Ship":"RESSURRECTION_SHIP",

        //Galactica
        "FTL Control":"FTL_CONTROL",
        "Weapons Control":"WEAPONS_CONTROL",
        "Communications":"COMMUNICATIONS",
        "Research Lab":"RESEARCH_LAB",
        "Command":"COMMAND",
        "Admirals Quarters":"ADMIRALS_QUARTERS",
        "Hangar Deck":"HANGAR_DECK",
        "Armory":"ARMORY",
        "Sickbay":"SICKBAY",
        "Brig":"BRIG",

    };

    let locationCoords = {
        //Colonial One
        "Press Room":[345,235],
        "Presidents Office":[480,235],
        "Administration":[605,235],

        //Cylon Locations
        "Caprica":[897,252],
        "Cylon Fleet":[992,252],
        "Human Fleet":[1088,252],
        "Resurrection Ship":[1184,252],

        //Galactica
        "FTL Control":[447,805],
        "Weapons Control":[596,721],
        "Communications":[744,721],
        "Research Lab":[894,721],
        "Command":[596,890],
        "Admirals Quarters":[738,889],
        "Hangar Deck":[894,891],
        "Armory":[1042,807],
        "Sickbay":[1192,723],
        "Brig":[1186,894],
    };

    //receives chat and game_text from server and prints it in chat div
    socket.on('chat', text => {
        chat.innerHTML += text;
        chat.scrollTop = chat.scrollHeight;
    });
    socket.on('game_text', text => {
        game_data.innerHTML += text;
        game_data.scrollTop = game_data.scrollHeight;
    });

    //sends chat when enter is pressed in chat input
    chat_input.addEventListener('keyup', event => {
        event.preventDefault();
        if (event.keyCode === 13) {
            let text = chat_input.value;
            chat_input.value = '';
            socket.emit('chat', `${name}: ${text}</p>`);
        }
    });
    game_input.addEventListener('keyup', event => {
        event.preventDefault();
        if (event.keyCode === 13) {
            let text = game_input.value;
            game_input.value = '';
            socket.emit('game_text', text);
        }
    });

    //attempts to login on click
    login.addEventListener('click', () => {
        if (username.value.split(' ').length === 1 && username.value !== '' && username.value.length < 15)
            socket.emit('login', username.value);
    });

    //what to do when server says login
    socket.on('login', loginName => {
        name = loginName;
        //online.style.display = 'inherit';
        game_body.innerHTML = "";
    });

    socket.on('lobby', tables => {
        let tablesHTML = `
            <button id="new_table" class="btn btn-lg btn-success btn-block">
                Click here to start a new table
            </button><br/><br/>
        `;
        //make a well for each table with basic info and a button to join it.
        for (let key in tables) {
            let players = '';
            for (let x = 0; x < tables[key].players.length; x++){
                players += `${x + 1}) ${tables[key].players[x].username} <br/>`;
            }
            tablesHTML += `
                <div class="well border">
                    <h1>${tables[key].host}'s table</h1>
                    ${players}
                    <button id="${tables[key].host}" class="btn btn-lg btn-primary btn-block">join table</button>
                </div>
            `;
        }
        game_body.innerHTML = tablesHTML;
        //activate join buttons
        for (let key in tables)
            $(`#${tables[key].host}`).click(() => socket.emit('join_table', key));
        //activate new table button
        $('#new_table').click(() => socket.emit('new_table'));
    });

    socket.on('table', table => {
        let tableHTML = `
            <h1>Welcome to ${table.host}'s table!</h1>
        `;
        //for each player at the table, print the name and if it
        //is the player using the client make a button else display if they are ready or not
        let players = '';
        for (let x = 0; x < table.players.length; x++) {
            players += `${x + 1}) ${table.players[x].username} : `;
            if (table.players[x].ready)
                players += `${name === table.players[x].username ?
                    `<button id="ready" class="btn btn-xs btn-default">ready</button>` : `ready`}`;
            else
                players += `${name === table.players[x].username ?
                    `<button id="ready" class="btn btn-xs btn-default">not ready</button>` : `not ready`}`;
            players += '<br/>';
        }

        //check if all players are ready
        let count = 0;
        for (let x = 0; x < table.players.length; x++)
            count += table.players[x].ready ? 1 : 0;
        let readyToStart = count === table.players.length && count > 1;

        tableHTML += players;

        if (readyToStart) {
            //if you are the host
            if (table.host === name)
                tableHTML += `
                    <p><center><----- cylon handicap --- no handicap --- human handicap -----></center><p/>
                    <p><input id="handicap" type="range" min="-2" max="2" value="0"/></p>


                    <p>
                        <input id="pegasus" type="checkbox"> Pegasus
                        <p id="pegasus_options" style="display: none">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input id="pegasus_extra_card" type="checkbox"> Variant: use "extra card" style Loyalty deck from Exodus
                        </p>
                    </p>

                    <p>
                        <input id="exodus" type="checkbox"> Exodus
                        <p id="exodus_options" style="display: none">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input id="exodus_goal_cards" type="checkbox"> Personal Goal cards<br/>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input id="exodus_final_five" type="checkbox"> Final Five cards<br/>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input id="exodus_cylon_board" type="checkbox"> Cylon Fleet board<br/>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input id="exodus_allies" type="checkbox"> Variant: Allies for All Seasons<br/>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input id="exodus_regular" type="checkbox"> Variant: use regular Loyalty Deck instead of "extra card"
                        </p>
                    </p>

                    <p>
                        <input id="day_break" type="checkbox"> Daybreak
                        <p id="day_break_options" style="display: none">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input id="day_break_variant" type="checkbox"> Variant: use the Demetrius board & Mission cards regardless of ending
                        </p>
                    </p>

                    <p>
                        <input id="cylon_leader" type="checkbox" disabled> Cylon Leader chosen
                    </p>

                    <div class="dropdown">
                        <button id="end_dropdown" class="btn btn-success dropdown-toggle btn-sm" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Select Ending
                        </button>
                        <div class="dropdown-menu" aria-labelledby="end_dropdown">
                            <p><button id="kobol" class="dropdown-item btn btn-primary btn-block btn-sm">Kobol</button></p>
                            <p><button id="new_caprica" class="dropdown-item btn btn-warning btn-block btn-sm" disabled>New Caprica</button></p>
                            <p><button id="ionian_nebula" class="dropdown-item btn btn-danger btn-block btn-sm" disabled>Ionian Nebula</button></p>
                            <p><button id="earth" class="dropdown-item btn btn-success btn-block btn-sm" disabled>Earth</button></p>
                        </div>
                    </div>

                    <input class="btn btn-sm" id="end" value="kobol" disabled>

                    <br>Extras:
                    <p><input id="no_sympathizer" type="checkbox"> Use official "No Sympathizer" variant</p>
                    <p><input id="Sympathetic_cylon" type="checkbox"> Variant: Use "Sympathetic Cylon" variant without Pegasus</p>
                    <p><input id="cylon_overlay" type="checkbox"> Variant: Use a Cylon Locations overlay</p>
                    <p><input id="replace_with_motives" type="checkbox" disabled> Variant: Replace Agenda cards with Motives from Daybreak</p>


                    <p><input id="cylonAttackCards" type="checkbox">Evenly distribute cylon attack cards</p>
                    <button id="go" class="btn btn-lg btn-block btn-success">start game</button>
                `;
            else
            //if you are not the host
                tableHTML += `<h3>Waiting for ${table.host} to start the game.</h3>`;
        }

        game_body.innerHTML = tableHTML;

        $('#ready').click(() => socket.emit('ready'));

        if (readyToStart && table.host === name) {
            let expansions = ['pegasus', 'exodus', 'day_break'];
            let endings = ['kobol', 'new_caprica', 'ionian_nebula', 'earth'];
            let exodusIds = ['exodus_goal_cards', 'exodus_final_five', 'exodus_cylon_board', 'exodus_allies', 'exodus_regular'];

            let id = e => document.getElementById(e);

            //on expansion checkbox change
            for (let e = 0; e < expansions.length; e++){
                $(`#${expansions[e]}`).change(function () {

                    //hide/show
                    id(`${expansions[e]}_options`)
                        .style.display = this.checked ? 'inherit' : 'none';

                    //specifics
                    switch (expansions[e]) {
                        case 'day_break' :
                            id('earth').disabled = !this.checked;
                            if (id('earth').disabled && id('end').value === 'earth') {
                                id('end').value = 'kobol';
                                id('exodus_allies').disabled = false;
                                id('exodus_regular').disabled = id('exodus_goal_cards').checked || id('exodus_allies').checked;
                                id('day_break_variant').disabled = false;
                            }
                            if (this.checked) {
                                id('replace_with_motives').disabled = true;
                                id('replace_with_motives').checked = false;
                                id('cylon_leader').disabled = false;
                                id('no_sympathizer').disabled = true;
                                id('Sympathetic_cylon').disabled = true;
                                id('no_sympathizer').checked = false;
                                id('Sympathetic_cylon').checked = false;
                                id('cylon_overlay').disabled = true;
                                id('cylon_overlay').checked = false;
                            } else {
                                if (!id('cylon_leader').checked) {
                                    id('no_sympathizer').disabled = false;
                                    id('Sympathetic_cylon').disabled = false;
                                }
                                if (!id('pegasus').checked) {
                                    id('cylon_overlay').disabled = false;
                                }
                                id('cylon_leader').disabled = !id('pegasus').checked;
                                if (id('cylon_leader').disabled)
                                    id('cylon_leader').checked = false;
                                id('day_break_variant').checked = false;
                            }
                            break;
                        case 'pegasus' :
                            id('new_caprica').disabled = !this.checked;
                            if (id('new_caprica').disabled && id('end').value === 'new_caprica') {
                                id('end').value = 'kobol';
                                id('exodus_allies').disabled = false;
                                id('exodus_regular').disabled = id('exodus_goal_cards').checked || id('exodus_allies').checked;
                                id('day_break_variant').disabled = false;
                            }
                            if (this.checked) {
                                id('cylon_leader').disabled = false;
                                id('cylon_overlay').disabled = true;
                                id('cylon_overlay').checked = false;
                            } else {
                                if (!id('day_break').checked && !id('Sympathetic_cylon').checked)
                                    id('cylon_overlay').disabled = false;
                                id('cylon_leader').disabled = !id('day_break').checked;
                                if (id('cylon_leader').disabled)
                                    id('cylon_leader').checked = false;
                                id('pegasus_extra_card').checked = false;
                                id('replace_with_motives').disabled = true;
                                id('replace_with_motives').checked = false;
                            }
                            break;
                        case 'exodus' :
                            id('ionian_nebula').disabled = !this.checked;
                            if (id('ionian_nebula').disabled && id('end').value === 'ionian_nebula') {
                                id('end').value = 'kobol';
                                id('exodus_allies').disabled = false;
                                id('exodus_regular').disabled = id('exodus_goal_cards').checked || id('exodus_allies').checked;
                                id('day_break_variant').disabled = false;
                            }
                            id('pegasus_extra_card').disabled = this.checked;
                            if (this.checked) {
                                id('pegasus_extra_card').checked = false;
                            } else {
                                for (let x = 0; x < exodusIds.length; x++)
                                    id(exodusIds[x]).checked = false;
                                id('exodus_regular').disabled = false;
                            }
                            break;
                    }
                });
            }

            $('#exodus_goal_cards').change(function () {
                if (this.checked) {
                    id('exodus_regular').disabled = true;
                    id('exodus_regular').checked = false;
                } else if(!id('exodus_allies').checked) {
                    if (id('end').value !== 'ionian_nebula')
                        id('exodus_regular').disabled = false;
                }
            });

            $('#exodus_allies').change(function () {
                if (this.checked) {
                    id('exodus_regular').disabled = true;
                    id('exodus_regular').checked = false;
                } else if(!id('exodus_goal_cards').checked) {
                    id('exodus_regular').disabled = false;
                }
            });

            $('#cylon_leader').change(function () {
                if (this.checked) {
                    id('replace_with_motives').disabled = id('day_break').checked;
                    id('no_sympathizer').disabled = true;
                    id('Sympathetic_cylon').disabled = true;
                    id('no_sympathizer').checked = false;
                    id('Sympathetic_cylon').checked = false;
                } else if (!id('day_break').checked){
                    id('replace_with_motives').disabled = true;
                    id('replace_with_motives').checked = false;
                    id('no_sympathizer').disabled = false;
                    id('Sympathetic_cylon').disabled = false;
                }
            });

            $('#no_sympathizer').change(function () {
                if (this.checked) {
                    id('Sympathetic_cylon').checked = false;
                    id('Sympathetic_cylon').disabled = true;
                } else if (!id('cylon_leader').checked && !id('day_break').checked) {
                    id('Sympathetic_cylon').disabled = false;
                }
            });

            $('#Sympathetic_cylon').change(function () {
                if (this.checked) {
                    id('replace_with_motives').disabled = false;
                    id('no_sympathizer').checked = false;
                    id('no_sympathizer').disabled = true;
                    id('cylon_overlay').disabled = true;
                } else if (!id('cylon_leader').checked && !id('day_break').checked) {
                    if (!id('pegasus').checked)
                        id('cylon_overlay').disabled = false;
                    id('no_sympathizer').disabled = false;
                    id('replace_with_motives').disabled = true;
                    id('replace_with_motives').checked = false;
                } else {
                    if (!id('pegasus').checked)
                        id('cylon_overlay').disabled = false;
                    id('replace_with_motives').disabled = true;
                    id('replace_with_motives').checked = false;
                }
            });



            //activate ending buttons
            for (let e = 0; e < endings.length; e++)
                $(`#${endings[e]}`).click(() => {
                id('end').value = endings[e];
                    switch (endings[e]){
                        case 'kobol' :
                            id('exodus_allies').disabled = false;
                            id('exodus_regular').disabled = id('exodus_goal_cards').checked || id('exodus_allies').checked;
                            id('day_break_variant').disabled = false;
                            break;
                        case 'new_caprica' :
                            id('exodus_allies').disabled = false;
                            id('exodus_regular').disabled = id('exodus_goal_cards').checked || id('exodus_allies').checked;
                            id('day_break_variant').disabled = false;
                            break;
                        case 'ionian_nebula' :
                            id('exodus_allies').disabled = true;
                            id('exodus_regular').disabled = true;
                            id('exodus_allies').checked = false;
                            id('exodus_regular').checked = false;
                            id('day_break_variant').disabled = false;
                            break;
                        case 'earth' :
                            id('exodus_allies').disabled = false;
                            id('exodus_regular').disabled = id('exodus_goal_cards').checked || id('exodus_allies').checked;
                            id('day_break_variant').disabled = true;
                            id('day_break_variant').checked = false;
                            break;
                    }
                });

            $('#go').click(() => socket.emit('start_game', {
                handicap: document.getElementById('handicap').value,
                day_break: document.getElementById('day_break').checked,
                exodus: document.getElementById('exodus').checked,
                pegasus: document.getElementById('pegasus').checked,
                cylonAttackCards: document.getElementById('cylonAttackCards').checked,
            }));
        }
    });

    socket.on('clear', () => game_body.innerHTML = "<div id='main_board'></div>");

    socket.on('gameState', gameState => {	
        gameState=JSON.parse(gameState);
        let main_board = document.getElementById('main_board');
        let player_hand = document.getElementById('player_hand');
        let board="<div id='main_board'>";
        board+="<div id=\"fuelCounter\" style=\"position:absolute;height:164px;width:164px;left:877px;top:23px;background-size:164px 164px;background-image:url('fuel"+gameState['fuelAmount']+".png');\"></div>";
        board+="<div id=\"foodCounter\" style=\"position:absolute;height:164px;width:164px;left:1047px;top:23px;background-size:164px 164px;background-image:url('fuel"+gameState['foodAmount']+".png');\"></div>";
        board+="<div id=\"moraleCounter\" style=\"position:absolute;height:164px;width:164px;left:1217px;top:25px;background-size:164px 164px;background-image:url('fuel"+gameState['moraleAmount']+".png');\"></div>";
        board+="<div id=\"populationCounter\" style=\"position:absolute;height:164px;width:164px;left:1390px;top:25px;background-size:164px 164px;background-image:url('fuel"+gameState['populationAmount']+".png');\"></div>";
        board+="<div id=\"jumpTrack\" style=\"position:absolute;height:93px;width:263px;left:1288px;top:222px;background-size:263px 93px;background-image:url('BSG_jump_0"+(gameState['jumpTrack']+1)+".png');\"></div>";
        for(let i=0;i<gameState['raptorsInHangar'];i++){
            board+="<div class=\"raptor\" style=\"position:absolute;height:31px;width:50px;left:"+(570+(i*55))+"px;top:50px;background-size:50px 31px;background-image:url('BSG_Raptor.png');\"></div>";
        }
        for(let i=0;i<Math.min(gameState['vipersInHangar'],4);i++){
            board+="<div class=\"viper\" style=\"position:absolute;height:23px;width:46px;left:"+(575+(i*50))+"px;top:100px;background-size:46px 23px;background-image:url('Viper.png');\"></div>";
        }
        for(let i=0;i<Math.min(gameState['vipersInHangar']-4,8);i++){
            board+="<div class=\"viper\" style=\"position:absolute;height:23px;width:46px;left:"+(575+(i*50))+"px;top:150px;background-size:46px 23px;background-image:url('Viper.png');\"></div>";
        }
        for(let i=0;i<4;i++){
            for(let j=0;j<Math.min(gameState['damagedVipers']-(2*i),2);j++) {
                board += "<div class=\"viper\" style=\"position:absolute;height:23px;width:46px;left:" + (355 + (j * 50)) + "px;top:"+(50 + (i * 35))+"px;background-size:46px 23px;background-image:url('Viper.png');\"></div>";
            }
        }
        for(let i=0;i<gameState['centurionTrack'].length;i++){
            for(let j=0;j<gameState['centurionTrack'][i];j++) {
                board += "<div id=\"centurion_"+i+"_"+j+"\" class=\"centurion\" style=\"position:absolute;height:78px;width:50px;left:"+(1292 + (i * 42))+"px;top:"+(325 + (j * 10))+"px;background-size:50px 78px;background-image:url('BSG_Boarding_Party.png');\"></div>";
            }
        }
        for(let loc in locationCoords){
            board+="<div onclick=\"clickLocation('"+loc+"');\" class=\"locationHotspot\" style=\"position:absolute;height:132px;width:100px;left:"+(locationCoords[loc][0])+"px;top:"+(locationCoords[loc][1])+"px;\"></div>"
        }
        for(let i=0;i<gameState['destinationsPlayed'].length;i++){
        	board += "<div class=\"destination\" style=\"position:absolute;margin:10px;height:233px;width:150px;left:7px;top:"+(737+(i*-50))+"px;background-size:150px 233px;background-image:url('" + gameState['destinationsPlayed'][i] + "');\"></div>";
        }

        let atLocation=[];
        for(let i=0;i<gameState['playerLocations'].length;i++){
            if(gameState['playerLocations'][i][0]==null){
                continue;
            }
            if(atLocation[gameState['playerLocations'][i][0]]==null) {
                atLocation[gameState['playerLocations'][i][0]]=0;
            }
            board += "<div class=\"playerPiece\" style=\"position:absolute;z-index:99;height:85px;width:58px;left:"+(locationCoords[gameState['playerLocations'][i][0]][0]+25)+"px;top:"+(locationCoords[gameState['playerLocations'][i][0]][1]-15+(20*atLocation[gameState['playerLocations'][i][0]]))+"px;background-size:58px 85px;background-image:url('"+gameState['playerLocations'][i][1]+"');\"></div>";
            atLocation[gameState['playerLocations'][i][0]]++;
        }
        if(gameState['activeLocation']!=null&&gameState['activeLocation']!==-1){
            board += "<button type=\"button\" onclick=\"activateLocation();\" class=\"activateLocationButton\"  style=\"position:absolute;left:"+(locationCoords[gameState['activeLocation']][0]+20)+"px;top:"+(locationCoords[gameState['activeLocation']][1]+130)+"px;background-color:green;\">Activate</button>";
        }
        if(gameState['damagedLocations'].length>0) {
            for (let i = 0; i < gameState['damagedLocations'].length; i++) {
                board += "<div class=\"damagedLocations\" style=\"position:absolute;height:75px;width:75px;left:" + (locationCoords[gameState['damagedLocations'][i][0]][0] + 15) + "px;top:" + (locationCoords[gameState['damagedLocations'][i][0]][1] - 5) + "px;background-size:75px 75px;background-image:url('" + gameState['damagedLocations'][i][1] + "');\"></div>";
            }
        }

        for(let spaceArea in spaceAreaToCoords){
            board+="<div id=\"Space_"+spaceArea+"\" class=\"spaceArea\" style=\"position:absolute;height:"+(spaceAreaToCoords[spaceArea][3])+"px;width:"+(spaceAreaToCoords[spaceArea][2])+"px;left:"+(spaceAreaToCoords[spaceArea][0])+"px;top:"+(spaceAreaToCoords[spaceArea][1])+"px;\">";
            for(let i=0;i<gameState['spaceAreas'][spaceArea].length;i++){
                let image=shipTypeToGraphic[gameState['spaceAreas'][spaceArea][i][0]];
                if(gameState['spaceAreas'][spaceArea][i][3]!=null){
                    image=civilianResourceToGraphic[gameState['spaceAreas'][spaceArea][i][3]];
                }
                board+="<div class=\"shipContainer\" style=\"margin:10px;height:"+(shipTypeToSize[gameState['spaceAreas'][spaceArea][i][0]][1])+"px;width:"+(shipTypeToSize[gameState['spaceAreas'][spaceArea][i][0]][0])+"px;\">";
                board+="<div id=\"Ship_"+spaceArea+"_"+i+"\" class=\"ship\" style=\"position:absolute;z-index:2;float:left;height:"+(shipTypeToSize[gameState['spaceAreas'][spaceArea][i][0]][1])+"px;width:"+(shipTypeToSize[gameState['spaceAreas'][spaceArea][i][0]][0])+"px;background-size:100% 100%;background-image:url('"+image+"');\"></div>";
                if(gameState['spaceAreas'][spaceArea][i][1]!==-1){
                    board+="<div class=\"pilot\" style=\"position:absolute;z-index:1;margin-left:5px;margin-top:-15px;height:55px;width:55px;background-size:55px 55px;background-image:url('"+gameState['spaceAreas'][spaceArea][i][1]+"');\"></div>";
                }
                if(gameState['spaceAreas'][spaceArea][i][2]!=null){
                    for(let j=0;j<gameState['spaceAreas'][spaceArea][i][2].length;j++){
                        board+="<div class=\"basestarDamage\" style=\"position:absolute;z-index:99;margin-left:"+(5+(j*110))+"px;margin-top:-15px;height:100px;width:100px;background-size:100px 100px;background-image:url('"+gameState['spaceAreas'][spaceArea][i][2][j]+"');\"></div>";
                    }
                }
                board+="</div>";
            }

            board+="</div>";
        }
        
        if(gameState['colonialOneDestroyed']){
        	board+="<div id=\"colonialOneDestroyed\"></div>";
        }

        if(gameState['gamePhase']==="Skill Check"){
            board+="<div id=\"choicePanel\">";
            if(gameState['crisis']!=null) {
                board+="<div class=\"crisisCard\" style=\"margin:10px;height:324px;width:206px;left:0px;top:0px;background-size:206px 324px;background-image:url('" + gameState['crisis'] + "');\"></div>";
            }
            if(gameState['narration']!=="") {
                board += "<div id=\"narration\" style=\"position:relative;margin-left:10px;margin-right:10px;margin-bottom:10px;left:0px;top:0px;\">"+gameState['narration']+"</div>";
            }
            if(gameState['active']) {
                board += "<div style=\"position:relative;margin-bottom:10px;padding-right:50px;left:0px;top:0px;\">";
                board += "<button type=\"button\" onclick=\"submitCrisis();\" class=\"submitCrisisButton\"  style=\"position:relative;margin-bottom:10px;left:25px;top:5px;background-color:green;\">Add <span id='crisisCardsSelected'>0</span> cards to "+(gameState['crisis']==null?"Skill Check":"Crisis")+"</button>";
                board+="</div>";
            }
            board+="</div>";
        }else if(gameState['gamePhase']==="Before skill check"||gameState['gamePhase']==="After skill check count"){
            board+="<div id=\"choicePanel\">";
            if(gameState['crisis']!=null) {                                                                                
                board+="<div class=\"crisisCard\" style=\"margin:10px;height:324px;width:206px;left:0px;top:0px;background-size:206px 324px;background-image:url('" + gameState['crisis'] + "');\"></div>";
            }
            board += "<div id=\"narration\" style=\"position:relative;margin-left:10px;margin-right:10px;margin-bottom:10px;left:0px;top:0px;\">"+
            (gameState['gamePhase']==="Before skill check"?"About to do a skill check:<br>you may play cards and abilities":"Skill check finished:<br>you may play cards and abilities")+"</div>";
            board+="</div>";
        }else if(gameState['gamePhase']==="Single player discards"||gameState['gamePhase']==="All players discard"){
            board+="<div id=\"choicePanel\">";
            if(gameState['crisis']!=null) {
                board+="<div class=\"crisisCard\" style=\"margin:10px;height:324px;width:206px;left:0px;top:0px;background-size:206px 324px;background-image:url('" + gameState['crisis'] + "');\"></div>";
            }
            if(gameState['cylonShown']!=null) {
                board += "<div style=\"padding-right:50px;height:310px;width:200px;\">";
                board += "<div class=\"cylonShown\" style=\"position:absolute;margin:10px;height:288px;width:183px;left:0px;top:0px;background-size:183px 288px;background-image:url('" + gameState['cylonShown'] + "');\"></div>";
                board+="</div>";
            }
            if(gameState['narration']!=="") {
                board += "<div id=\"narration\" style=\"position:relative;margin-left:10px;margin-right:10px;margin-bottom:10px;left:0px;top:0px;\">"+gameState['narration']+"</div>";
            }
            if(gameState['active']) {
                board += "<div style=\"position:relative;margin-bottom:10px;padding-right:50px;left:0px;top:0px;\">";
                board += "<button type=\"button\" onclick=\"submitCrisis();\" class=\"submitCrisisButton\"  style=\"position:relative;margin-bottom:10px;left:15px;top:5px;background-color:green;\">Discard <span id='crisisCardsSelected'>0</span> cards</button>";
                board +="</div>";
            }
            board+="</div>";

        }else if(gameState['gamePhase']==="Make a choice"||gameState['gamePhase']==="Roll Die"||
        	gameState['gamePhase']==="pause for Starbuck"||
        	gameState['gamePhase']==="pause for fracking boomer"||
        	gameState['gamePhase']==="pause for Galen"||
        	gameState['gamePhase']==="this time we pause for bill..."
        	){
            board+="<div id=\"choicePanel\">";
            if(gameState['midGamePause']!=null) {
                board += "<div style=\"padding-right:50px;height:310px;width:200px;\">";
                board += "<div class=\"midGamePause\" style=\"position:absolute;margin:10px;height:288px;width:183px;left:0px;top:0px;background-size:183px 288px;background-image:url('" + gameState['midGamePause'] + "');\"></div>";
                board += "</div>";
            }else if(gameState['destinations']!=null) {
                board += "<div style=\"padding-right:50px;height:250px;width:"+(160*gameState['destinations'].length+20)+"px;\">";
                for(let i=0;i<gameState['destinations'].length;i++){
                    board += "<div class=\"destination\" style=\"position:absolute;margin:10px;height:233px;width:150px;left:"+(160*i)+"px;top:0px;background-size:150px 233px;background-image:url('" + gameState['destinations'][i] + "');\"></div>";
                }
                board+="</div>";
            }else if(gameState['scout']!=null) {
                board += "<div style=\"padding-right:50px;height:250px;width:200px;\">";
                board += "<div class=\"destination\" style=\"position:absolute;margin:10px;height:233px;width:150px;left:20px;top:0px;background-size:150px 233px;background-image:url('" + gameState['scout'] + "');\"></div>";
                board +="</div>";
            }else if(gameState['crisisOptions']!=null) {
                board += "<div style=\"padding-right:50px;height:250px;width:"+(160*gameState['crisisOptions'].length+20)+"px;\">";
                for(let i=0;i<gameState['crisisOptions'].length;i++){
                    board += "<div class=\"capricaOption\" style=\"position:absolute;margin:10px;height:233px;width:150px;left:"+(160*i)+"px;top:0px;background-size:150px 233px;background-image:url('" + gameState['crisisOptions'][i] + "');\"></div>";
                }
                board+="</div>";
            }else if(gameState['loyaltyShown']!=null) {
                board += "<div style=\"padding-right:50px;height:310px;width:"+(193*gameState['loyaltyShown'].length+20)+"px;\">";
                for(let i=0;i<gameState['loyaltyShown'].length;i++){
                    board += "<div class=\"loyaltyShown\" style=\"position:absolute;margin:10px;height:288px;width:183px;left:"+(193*i)+"px;top:0px;background-size:183px 288px;background-image:url('" + gameState['loyaltyShown'][i] + "');\"></div>";
                }
                board+="</div>";
            }else if(gameState['cylonShown']!=null) {
                board += "<div style=\"padding-right:50px;height:310px;width:200px;\">";
                board += "<div class=\"cylonShown\" style=\"position:absolute;margin:10px;height:288px;width:183px;left:0px;top:0px;background-size:183px 288px;background-image:url('" + gameState['cylonShown'] + "');\"></div>";
                board+="</div>";
            }else if(gameState['humanFleetHandShown']!=null) {
                board += "<div style=\"height:230px;width:"+(50*gameState['humanFleetHandShown'].length+130)+"px\">";
                for(let i=0;i<gameState['humanFleetHandShown'].length;i++){
                	board+="<div id=\"humanFleetCards_"+i+"\" class=\"humanFleetCard\" style=\"position:absolute;margin:10px;height:206px;width:133px;left:"+(50*i)+"px;top:0px;background-size:133px 206px;background-image:url('"+gameState['humanFleetHandShown'][i]+"');\"></div>";
                }
                board+="</div>";
            }else if(gameState['crisis']!=null) {
                board += "<div class=\"crisisCard\" style=\"margin:10px;height:324px;width:206px;left:0px;top:0px;background-size:206px 324px;background-image:url('" + gameState['crisis'] + "');\"></div>";
            }else if(gameState['quorum'].length>0){
            	board+="<div style=\"padding-right:50px;height:260px;width:"+(165*gameState['quorum'].length+20)+"px;\">";
            	for(let i=0;i<gameState['quorum'].length;i++){
            		board += "<div class=\"crisisCard\" style=\"position:absolute;margin:10px;height:243px;width:155px;left:"+(165*i)+"px;top:0px;background-size:155px 243px;background-image:url('" + gameState['quorum'][i] + "');\"></div>";
                }
                board+="</div>";
            }
            if(gameState['narration']!=="") {
                board += "<div id=\"narration\" style=\"position:relative;margin-left:10px;margin-right:10px;margin-bottom:10px;left:0px;top:0px;\">"+gameState['narration']+"</div>";
            }
            if(gameState['choiceOptions'].length>0) {
                board += "<div style=\"position:relative;margin-bottom:10px;padding-right:50px;left:0px;top:0px;\">";
                for (let i=0;i<gameState['choiceOptions'].length;i++) {
                    board += "<button type=\"button\" onclick=\"submitChoice('"+i+"');\" class=\"submitCrisisButton\"  style=\"position:relative;margin-left:10px;top:5px;background-color:green;\">"+gameState['choiceOptions'][i]+"</button>";
                }

                board+="</div>";
            }
            board+="</div>";

        }else if(gameState['gamePhase']==="Lee Adama Starting Launch"||gameState['gamePhase']==="Pick Launch Location"){
            board+="<div id=\"choicePanel\">";
            if(gameState['active']) {
                board+="<div style=\"position:relative;margin-bottom:10px;left:0px;top:0px;\">";
                board += "<button type=\"button\" onclick=\"submitChoice('0');\" class=\"submitCrisisButton\"  style=\"position:relative;margin-left:10px;top:5px;background-color:green;\">Launch Southwest</button>";
                board += "<button type=\"button\" onclick=\"submitChoice('1');\" class=\"submitCrisisButton\"  style=\"position:relative;margin-left:10px;margin-right:5px;top:5px;background-color:green;\">Launch Southeast</button>";
                board+="</div>";
            }
            board+="</div>";
        }else if(gameState['gamePhase']==="Pick Research Card"&&gameState['active']){
            board+="<div id=\"choicePanel\"><div style=\"position:relative;margin-bottom:10px;left:0px;top:0px;\">";
            board+="<button type=\"button\" onclick=\"submitChoice('0');\" class=\"submitCrisisButton\"  style=\"position:relative;margin-left:10px;top:5px;background-color:green;\">Engineering</button>";
            board+="<button type=\"button\" onclick=\"submitChoice('1');\" class=\"submitCrisisButton\"  style=\"position:relative;margin-left:10px;margin-right:5px;top:5px;background-color:green;\">Tactics</button>";
            board+="</div></div>";
        }else{
            if(gameState['narration']!=="") {
                board+="<div id=\"choicePanel\">";
                board += "<div id=\"narration\" style=\"position:relative;margin-left:10px;margin-right:10px;margin-bottom:10px;left:0px;top:0px;\">"+gameState['narration']+"</div>";
                board+="</div>";
            }
        }
        if(gameState['skillCheckCards'].length>0){
			board+="<div id=\"skillCheckPanel\" style=\"height:230px;width:"+(30*gameState['skillCheckCards'].length+130)+"px\">";
			for(let i=0;i<gameState['skillCheckCards'].length;i++){
				board+="<div id=\"skillCheckCard_"+i+"\" class=\"skillCheckCard\" style=\"position:absolute;margin:10px;height:206px;width:133px;left:"+(30*i)+"px;top:0px;background-size:133px 206px;background-image:url('"+gameState['skillCheckCards'][i][0]+"');\"></div>";
				board+="<div id=\"playedSkillCardPlayerIcon_"+i+"\" class=\"playerIcon\" style=\"position:absolute;z-index:101;height:42px;width:29px;left:"+(30*i+11)+"px;top:173px;background-size:29px 42px;background-image:url('"+gameState['skillCheckCards'][i][1]+"');\"></div>";
			}
			board+="</div>";
		}
		if(gameState['playedSkillCards'].length>0) {
			for(let i=0;i<gameState['playedSkillCards'].length;i++){
				board+="<div id=\"playedSkillCard_"+i+"\" class=\"playedSkillCard\" style=\"position:fixed;z-index:100;height:206px;width:133px;left:350px;top:"+(i*50+150)+"px;background-size:133px 206px;background-image:url('"+gameState['playedSkillCards'][i][0]+"');\"></div>";
				if(gameState['playedSkillCards'][i][1]!=null){	
					board+="<div id=\"playedSkillCardPlayerIcon_"+i+"\" class=\"playerIcon\" style=\"position:fixed;z-index:101;height:42px;width:29px;left:450px;top:"+(i*50+152)+"px;background-size:29px 42px;background-image:url('"+gameState['playedSkillCards'][i][1]+"');\"></div>";
				}
			}
		}
        if(gameState['gamePhase']==="Roll Die"){
            if(gameState['reactNarration']!=="") {
                board+="<div id=\"reactChoicePanel\">";
                board += "<div id=\"reactNarration\" style=\"position:relative;margin-left:10px;margin-right:10px;margin-bottom:10px;left:0px;top:0px;\">"+gameState['reactNarration'];
                board+="</div>";
                board+="</div>";
            } 
			board += "<div id=\"diePanel\" style=\"background-image: url('d8_roll.gif')\">";
            if(gameState['strategicPlanning']>-1){
                board += "<b>+2</b>";
            }
            board += "</div>";
        }
        if(gameState['roll']!=null&&gameState['roll']>0) {
            board += "<div id=\"diePanel\" style=\"background-image: url('d8_"+gameState['roll']+".png')\">";
            if(gameState['strategicPlanning']>-1){
                board += "<b>+2</b>";
            }
            board += "</div>";
        }

        board+="</div>";
        game_body.innerHTML = board;
        //$( "#game_body" ).resizable();
        //$( "#choicePanel" ).draggable();
        //$( "#diePanel" ).draggable();

        
        let hand="";
        if(gameState['active']){
            hand+="<div id='turnAlert'>It's your turn</div>";
        }

        let handTotalLeft=10;
        if(gameState['availableCharacters'].length>0){
            for(let i=0;i<gameState['availableCharacters'].length;i++){
                hand += "<div id=\"characterCard_"+gameState['availableCharacters'][i][0]+"\" class=\"characterCard\" style=\"position:absolute;height:301px;width:450px;left:"+(handTotalLeft)+"px;top:5px;background-size:450px 301px;background-image:url('"+gameState['availableCharacters'][i][1]+"');\"></div>";
                handTotalLeft+=460;
            }
        }
        if(gameState['character']!=null) {
            hand += "<div class=\"characterCard\" style=\"position:absolute;height:301px;width:450px;left:"+(handTotalLeft)+"px;top:5px;background-size:450px 301px;background-image:url('"+gameState['character']+"');\"></div>";
            handTotalLeft+=460;
        }
        if(gameState['admiral']!=null) {
        	hand += "<div id=\"admiralTitle\" class=\"admiralTitle\" style=\"position:absolute;height:288px;width:183px;left:"+(handTotalLeft)+"px;top:10px;background-size:183px 288px;background-image:url('"+gameState['admiral']+"');\"></div>";
            handTotalLeft+=200;
        }
        if(gameState['president']!=null) {
        	hand += "<div id=\"presidentTitle\" class=\"presidentTitle\" style=\"position:absolute;height:288px;width:183px;left:"+(handTotalLeft)+"px;top:10px;background-size:183px 288px;background-image:url('"+gameState['president']+"');\"></div>";
            handTotalLeft+=200;
        }
        if(gameState['assignedQuorum'].length>0){
            handTotalLeft+=25;
            for(let i=0;i<gameState['assignedQuorum'].length;i++){
                hand += "<div id=\"assignedQuorumCard_"+i+"\" class=\"assignedQuorumCard\" style=\"position:absolute;height:288px;width:183px;left:"+(handTotalLeft)+"px;top:10px;background-size:183px 288px;background-image:url('"+gameState['assignedQuorum'][i]+"');\"></div>";
                handTotalLeft+=200;
            }
        }
        for (let i = 0; i < gameState['superCrisis'].length; i++) {
            hand += "<div id=\"superCrisis_"+i+"\" class=\"superCrisis\" style=\"position:absolute;height:288px;width:183px;left:" + (handTotalLeft) + "px;top:10px;background-size:183px 288px;background-image:url('"+gameState['superCrisis'][i]+"');\"></div>";
            handTotalLeft += 195;
        }
        for(let i=0;i<gameState['hand'].length;i++){
            hand += "<div id=\"skillCard_"+i+"\" class=\"skillCard\" style=\"position:absolute;height:206px;width:133px;left:"+(handTotalLeft)+"px;top:90px;background-size:133px 206px;background-image:url('"+gameState['hand'][i]+"');\"></div>";
            handTotalLeft+=143;
        }
        if(gameState['quorumHand'].length>0){
            handTotalLeft+=25;
            for(let i=0;i<gameState['quorumHand'].length;i++){
                hand += "<div id=\"quorumCard_"+i+"\" class=\"quorumCard\" style=\"position:absolute;height:288px;width:183px;left:"+(handTotalLeft)+"px;top:10px;background-size:183px 288px;background-image:url('"+gameState['quorumHand'][i]+"');\"></div>";
                handTotalLeft+=200;
            }
        }
        if(gameState['nukes']>0) {
            handTotalLeft+=50;
            for (let i = 0; i < gameState['nukes']; i++) {
                hand += "<div class=\"nuke\" style=\"position:absolute;height:91px;width:105px;left:" + (handTotalLeft) + "px;top:100px;background-size:104px 91px;background-image:url('BSG_035.png');\"></div>";
                handTotalLeft += 130;
            }
        }

        for (let i = 0; i < gameState['loyalty'].length; i++) {
            hand += "<div id=\"loyalty_"+i+"\" class=\"loyalty\" style=\"position:absolute;height:288px;width:183px;left:" + (handTotalLeft) + "px;top:10px;background-size:183px 288px;background-image:url('"+gameState['loyalty'][i]+"');\"></div>";
            handTotalLeft += 195;
        }
        for (let i = 0; i < gameState['revealedLoyalty'].length; i++) {
            hand += "<div id=\"revealedLoyalty_"+i+"\" class=\"revealedLoyalty\" style=\"position:absolute;height:288px;width:183px;left:" + (handTotalLeft) + "px;top:10px;background-size:183px 288px;background-image:url('"+gameState['revealedLoyalty'][i]+"');\"></div>";
            handTotalLeft += 195;
        }

        player_hand.innerHTML = hand;

        $(".characterCard").click(
            function () {
                if(gameState['gamePhase']==="Pick Characters") {
                    let id = $(this).attr('id').split("_")[1];
                    $(this).click(clickCharacterCard(id));
                }else{
                    $(this).click(clickCharacterCard("character"));
                }
            },
        );
        if(gameState['gamePhase']!=="Skill Check"&&gameState['gamePhase']!=="Single player discards"&&gameState['gamePhase']!=="All players discard") {
            $(".skillCard").click(
                function (index) {
                    let id = $(this).attr('id').split("_")[1];
                    $(this).click(clickSkillCard(id));
                },
            );
        }
        if(gameState['gamePhase']==="Main Turn") {
            $(".quorumCard").click(
                function (index) {
                    let id = $(this).attr('id').split("_")[1];
                    $(this).click(clickQuorumCard(id));
                },
            );
        }

        $(".spaceArea").click(
            function () {
                let area=$(this).attr('id').split("_")[1];
                clickSpaceArea(spaceAreaToEnum[area]);
            },
        );

        $(".centurion").click(
            function (index) {
                let id=$(this).attr('id').split("_");
                $(this).click(clickCenturion(id[1]));
            },
        );

        $(".nuke").click(
            function (index) {
                $(this).click(clickNuke());
            },
        );

        $(".loyalty").click(
            function () {
                let id=$(this).attr('id').split("_");
                $(this).click(clickLoyalty(id[1]));
            },
        );
        
        $(".humanFleetCard").click(
            function () {
                let id=$(this).attr('id').split("_");
                $(this).click(submitChoice(id[1]));
            },
        );
        $(".humanFleetCard").hover(
            function () {
                $(this).addClass("humanFleetCardHover");
            },
            function () {
                $(this).removeClass("humanFleetCardHover");
            }
        );

        $(".ship").click(
            function (event) {
                event.stopPropagation();
                let id=$(this).attr('id').split("_");
                $(this).click(clickShip(spaceAreaToEnum[id[1]],id[2]));
            },
        );

        $(".skillCard, .quorumCard, .characterCard, .ship, .nuke").hover(
            function () {
                $(this).addClass("cardHover");
            },
            function () {
                $(this).removeClass("cardHover");
            }
        );

        $(".locationHotspot").hover(
            function () {
                if(gameState['canMove']) {
                    //$(this).addClass("locationHighlight");
                    $(this).html("&nbsp;Click to Move");
                }

            },
            function () {
                if(gameState['canMove']) {
                    //$(this).removeClass("locationHighlight");
                    $(this).html("");
                }
            }
        );
        
        $(".loyalty").hover(
            function () {
            	if(gameState['active']&&gameState['gamePhase']==="Main Turn"){
					let img=$(this).css("background-image").replace(/^url|[\(\)]/g, '').split("/");
					img=img[img.length-1];
					img=img.substring(0, img.length - 1);
					if(img!=="BSG_Loyalty_Not_Cylon.png") {
						$(this).addClass("cardHover");
						$(this).html("&nbsp;<b>Click to Reveal as Cylon!</b>");
					}
                }
            },
            function () {
            	$(this).removeClass("cardHover");
            	$(this).html("");
            }
        );

        if(gameState['gamePhase']==="Skill Check"||gameState['gamePhase']==="Single player discards"||gameState['gamePhase']==="All players discard"){
            $(".skillCard").click(
                function () {
                    $(this).toggleClass("cardSelected");
                    $("#crisisCardsSelected").html($(".cardSelected").length);
                },
            );
        }else{
            $(".skillCard").each(
                function () {
                    $(this).removeClass("cardSelected");
                },
            );
        }



    });

</script>


</body>
</html>











